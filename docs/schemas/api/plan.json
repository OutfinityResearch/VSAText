{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "scripta.api.plan",
  "title": "SCRIPTA Plan Schemas",
  "type": "object",
  "$defs": {
    "Scene": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "$ref": "common.json#/$defs/Id" },
        "summary": { "type": "string" },
        "goals": { "type": "array", "items": { "type": "string" } },
        "constraints": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["id", "summary"]
    },
    "Plan": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "$ref": "common.json#/$defs/Id" },
        "spec_id": { "$ref": "common.json#/$defs/Id" },
        "plot_graph": { "type": "string" },
        "scenes": { "type": "array", "items": { "$ref": "#/$defs/Scene" } },
        "arcs": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["id", "spec_id"]
    },
    "CreatePlanRequest": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "spec_id": { "$ref": "common.json#/$defs/Id" },
        "planning_params": { "type": "object", "additionalProperties": true },
        "implementation_profile": { "$ref": "common.json#/$defs/ImplementationProfile" }
      },
      "required": ["spec_id"]
    },
    "CreatePlanResponse": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "plan": { "$ref": "#/$defs/Plan" },
        "audit": { "$ref": "common.json#/$defs/AuditLogEntry" }
      },
      "required": ["plan"]
    },
    "GetPlanResponse": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "plan": { "$ref": "#/$defs/Plan" }
      },
      "required": ["plan"]
    }
  }
}
