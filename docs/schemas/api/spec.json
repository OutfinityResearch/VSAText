{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "scripta.api.spec",
  "title": "SCRIPTA Narrative Spec Schemas",
  "type": "object",
  "$defs": {
    "Character": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "$ref": "common.json#/$defs/Id" },
        "name": { "type": "string" },
        "traits": { "type": "array", "items": { "type": "string" } },
        "goals": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["id", "name"]
    },
    "WorldRule": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "$ref": "common.json#/$defs/Id" },
        "rule": { "type": "string" }
      },
      "required": ["id", "rule"]
    },
    "NarrativeSpec": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "$ref": "common.json#/$defs/Id" },
        "title": { "type": "string" },
        "synopsis": { "type": "string" },
        "themes": { "type": "array", "items": { "type": "string" } },
        "constraints": { "type": "array", "items": { "type": "string" } },
        "cnl_constraints": { "type": "array", "items": { "type": "string" } },
        "characters": { "type": "array", "items": { "$ref": "#/$defs/Character" } },
        "world_rules": { "type": "array", "items": { "$ref": "#/$defs/WorldRule" } }
      },
      "required": ["id", "title"]
    },
    "CreateSpecRequest": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "spec": { "$ref": "#/$defs/NarrativeSpec" }
      },
      "required": ["spec"]
    },
    "CreateSpecResponse": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "spec": { "$ref": "#/$defs/NarrativeSpec" },
        "audit": { "$ref": "common.json#/$defs/AuditLogEntry" }
      },
      "required": ["spec"]
    },
    "GetSpecResponse": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "spec": { "$ref": "#/$defs/NarrativeSpec" }
      },
      "required": ["spec"]
    }
  }
}
